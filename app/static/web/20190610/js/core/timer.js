(function(){Timer=function(A){this.interval=A||50;this.paused=false;this.info={lastTime:0,currentTime:0,deltaTime:0,realDeltaTime:0};this._startTime=0;this._intervalID=null;this._listeners=[]};Timer.prototype.start=function(){if(this._intervalID!=null){return}this._startTime=this.info.lastTime=this.info.currentTime=Date.now();var A=this;var B=function(){A._intervalID=setTimeout(B,A.interval);A._run()};B()};Timer.prototype.stop=function(){clearTimeout(this._intervalID);this._intervalID=null;this._startTime=0};Timer.prototype.pause=function(){this.paused=true};Timer.prototype.resume=function(){this.paused=false};Timer.prototype._run=function(){if(this.paused){return}var F=this.info;var D=F.currentTime=Date.now();F.deltaTime=F.realDeltaTime=D-F.lastTime;for(var A=0,E=this._listeners.length,B,C;A<E;A++){B=this._listeners[A];C=B.__runTime||0;if(C==0){B.step(this.info)}else{if(D>C){B.step(this.info);this._listeners.splice(A,1);A--;E--}}}F.lastTime=D};Timer.prototype.delay=function(A,C){var B={step:A,__runTime:Date.now()+C};this.addListener(B)};Timer.prototype.addListener=function(A){if(A==null||typeof(A.step)!="function"){throw"Timer Error: The listener object must implement a step() method!"}this._listeners.push(A)};Timer.prototype.removeListener=function(A){var B=this._listeners.indexOf(A);if(B>-1){this._listeners.splice(B,1)}}})();