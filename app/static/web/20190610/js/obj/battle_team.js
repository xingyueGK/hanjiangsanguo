var Team=function(A){this.e=null;this.teamid="";this.uid=0;this.line=0;this.direction="";this.name="";this.level=0;this.blood=0;this.allblood=0;this.matrix=null;if(A.teamid){this.teamid=A.teamid}if(A.uid){this.uid=A.uid}if(A.line){this.line=A.line}if(A.direction){this.direction=A.direction}if(A.name){this.name=A.name}if(A.level){this.level=A.level}if(A.blood){this.blood=A.blood}if(A.allblood){this.allblood=A.allblood}if(A.matrix){this.matrix=A.matrix}this.init()};Team.prototype.init=function(){this.e=$('<div id="'+this.teamid+'" class="team_wrap '+(this.direction=="right"?"rightteam_wrap":"")+'"></div>');var A="";for(var B=1;B<=9;B++){if(typeof this.matrix[B]!="undefined"){A+='<span class="p'+B+'" style="background:url('+xGame.miniavatar(this.matrix[B])+') 0 0 no-repeat;"><em></em></span>'}}A+='<p class="name">'+this.name+"</p>";var C=(this.blood/this.allblood).toFixed(3)*190;A+='<div class="blood_wrap"><p style="width:'+C+'px;"></p></div>';this.e.append(A)};Team.prototype.die=function(B){if(B===true){this.e.remove()}else{for(var A=0;A<B.length;A++){this.e.find(".p"+B[A]).remove()}}};Team.prototype.showSuffer=function(A){this.showNumber(A,A<0?true:false);this.blood=this.blood-A;if(this.blood<0){this.blood=0}this.setBar({blood:this.blood})};Team.prototype.showNumber=function(C,B){var D=(B?"":"-")+C.toString();var A=new Num({id:helper.createUUID("bloodnum"),src:staticUrl+"img/battle/numtext"+(B==true?"_add":"")+".png",max:D.length,gap:24,height:30,x:124-(24*D.length)/2,y:60,value:D,zindex:20,});this.e.append(A.e);setTimeout(function(){A.e.animate({opacity:0,top:(A.y-20)+"px"},400,"ease-out",function(){A.destory()})},400)};Team.prototype.setBar=function(A){if(A.blood>=0){this.blood=parseFloat(A.blood).toFixed(2);if(this.blood<=0){this.e.find(".blood_wrap").children("p").width(0);this.die(true)}else{this.e.find(".blood_wrap").children("p").width((this.blood/this.allblood).toFixed(3)*190)}}};Team.prototype.updateBlood=function(A){this.allblood=A.allblood;this.setBar({blood:A.blood})};