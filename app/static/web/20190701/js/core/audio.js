(function(){gAudioClass=function(){this.musicstatus=true;this.ready=false;this.musicurl={};this.nativemusic={};this.musicfiles=["city_bgm","battle_bgm"];this.init()};gAudioClass.prototype={init:function(){if(localStorage["gAudiomusicstatus"]=="false"){this.musicstatus=false}},loadMusic:function(){if(this.musicstatus==false){return}for(var A=0;A<this.musicfiles.length;A++){var B=this.musicfiles[A];this.musicurl[B]=staticUrl+"audio/"+B+".mp3";this.nativemusic[B]=new Media(this.musicurl[B],function(){},function(){console.log("native music error")})}},settingmusic:function(A){this.musicstatus=A;if(A==true){localStorage["gAudiomusicstatus"]="true";this.loadMusic();this.playbgm("city_bgm")}else{localStorage["gAudiomusicstatus"]="false";this.stopMusic()}},stopMusic:function(){for(var A in this.nativemusic){this.nativemusic[A].stop();this.nativemusic[A].release()}},playbgm:function(A){var C=this;if(C.ready==true&&C.musicstatus==true&&C.musicurl[A]!=null){for(var B in C.nativemusic){if(B!=A&&C.nativemusic[B]!=undefined&&C.nativemusic[B]!=null){C.nativemusic[B].stop()}}var D=C.musicurl[A];if(C.nativemusic[A]==undefined||C.nativemusic[A]==null){C.nativemusic[A]=new Media(D,function(){},function(){console.log("native music error:"+A)});C.nativemusic[A].play({playAudioWhenScreenIsLocked:false,numberOfLoops:"infinite"})}else{C.nativemusic[A].getCurrentPosition(function(E){if(E<=-1){C.nativemusic[A].play({playAudioWhenScreenIsLocked:false,numberOfLoops:"infinite"})}},function(E){console.log("Error getting pos="+E)})}}},}})();