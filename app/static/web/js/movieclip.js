(function(){movieClipClass=function(A){this.playtype=2;this.id="";this.img="";this.width=0;this.height=0;this.x=0;this.y=0;this.frames=null;this.loop=false;this.looptimes=1;this.obj=null;this.pause=false;this.currentFrame=0;this.callback=null;this.scaleX=0;this.scale=1;this.img=A.img;this.width=A.width;this.height=A.height;this.x=A.x;this.y=A.y;this.frames=A.frames;this.loop=A.loop;if(A.callback){this.callback=A.callback}if(A.scaleX){this.scaleX=A.scaleX}if(A.scale!=1){this.scale=A.scale}if(A.endDestory){this.endDestory=A.endDestory}if(A.zindex){this.zindex=A.zindex}this.thread=null;this.init()};movieClipClass.prototype={init:function(){this.id=helper.createUUID("mymovieclip");var A="";if(this.playtype==1){A+='<div id="'+this.id+'" style="display:none;pointer-events:none;'+(this.zindex>0?"z-index:"+this.zindex+";":"")+"overflow: hidden;width:"+this.width+"px;height:"+this.height+"px;position:absolute;left:"+this.x+"px;top:"+this.y+"px;"+(this.scaleX==-1?"-webkit-transform: scaleX(-1);":"")+(this.scale!=1?"-webkit-transform: scale("+this.scale+");":"")+'">';A+='<div class="sprite_container"><img src="'+this.img+'" /></div>';A+="</div>"}else{A+='<div id="'+this.id+'" style="display:none;pointer-events:none;background-image:url('+this.img+");background-repeat:no-repeat;background-position:0 0;"+(this.zindex>0?"z-index:"+this.zindex+";":"")+"width:"+this.width+"px;height:"+this.height+"px;position:absolute;left:"+this.x+"px;top:"+this.y+"px;"+(this.scaleX==-1?"-webkit-transform: scaleX(-1);":"")+(this.scale!=1?"-webkit-transform: scale("+this.scale+");":"")+'"></div>'}this.obj=$(A)},appendTo:function(A){A.append(this.obj);A=null},play:function(){this.obj.show();this.playTimer(0)},playTimer:function(A){var B=this;if(B.pause==true){return}var C=B.getFrame(A);if(C==false&&(B.loop===true||(typeof B.loop!="boolean"&&B.looptimes<B.loop))){B.initAnim();A=0;C=B.getFrame(A);if(typeof B.loop!="boolean"){B.looptimes++}}if(C){if(B.playtype==1){var D={"-webkit-transform":"translate3d(-"+C.rect[0]+"px, -"+C.rect[1]+"px, 0px) scale(1)"};B.obj.find(".sprite_container").css(D);if(typeof C.rect[2]!="undefined"&&typeof C.rect[3]!="undefined"){B.obj.css({left:C.rect[2],top:C.rect[3]})}}else{var D={"background-position":"-"+C.rect[0]+"px -"+C.rect[1]+"px"};if(typeof C.rect[2]!="undefined"&&typeof C.rect[3]!="undefined"){D.left=C.rect[2];D.top=C.rect[3]}B.obj.css(D)}B.thread=setTimeout(function(){B.currentFrame=A+1;B.playTimer(B.currentFrame)},C.interval)}else{clearTimeout(B.thread);B.pause=true;if(B.callback){B.callback();B.callback=null}if(B.endDestory==true){B.endDestory=false;B.destory()}}},stop:function(){if(this.thread!=null){clearTimeout(this.thread)}this.pause=true},getFrame:function(A){if(this.frames&&this.frames[A]!=undefined){return this.frames[A]}return false},initAnim:function(){clearTimeout(this.thread);this.currentFrame=0;this.pause=false},replay:function(){this.initAnim();this.play()},destory:function(){this.initAnim();if(this.obj){this.obj.remove();this.img=null;this.obj=null}},}})();(function(){canvasAnimClass=function(A){this.id="";this.canvasOffset=A.canvasOffset;this.resource=A.resource||"all";this.img=A.img||"";this.obj=null;this.context=null;this.bufferObj=null;this.bufferContext=null;this.imgOffset=A.imgOffset||[{left:0,top:0}];this.width=A.width;this.height=A.height;this.bufferWidth=0;this.bufferHeight=0;this.loop=A.loop;this.interval=A.interval;this.anim=A.anim;this.timer=null;this.currentFrame=0;this.parse=false;this.isPlay=false;this.zIndex=A.zIndex||10;if(A.loadComplete){this.loadComplete=A.loadComplete}if(A.callback){this.callback=A.callback}if(A.endDestroy){this.endDestroy=A.endDestroy}this.init()};canvasAnimClass.prototype={init:function(){var C=this;var A="";var D="";var B=C.anim.length;C.canvasOffset.width=(C.canvasOffset.width||C.width);C.canvasOffset.height=(C.canvasOffset.height||C.height);C.id=helper.createUUID("canvasAnim");A='<canvas id="'+C.id+'" width="'+C.canvasOffset.width+'" height="'+C.canvasOffset.height+'" style="display:none;pointer-events:none;position:absolute;left:'+C.canvasOffset.left+"px;top:"+C.canvasOffset.top+"px;z-index:"+C.zIndex+';"></canvas>';D='<canvas id="'+C.id+'_buffer" width="'+(C.width*B)+'" height="'+C.height+'" style="display:none;pointer-events:none;position:absolute;"></canvas>';C.obj=$(A);C.context=C.obj[0].getContext("2d");C.bufferObj=$(D);C.bufferContext=C.bufferObj[0].getContext("2d");if(C.resource=="all"){C.loadAllImg()}else{C.loadSingleImg()}},loadAllImg:function(){var A=this;var B=new Image();B.src=A.img;B.onload=function(){A.bufferWidth=this.width;A.bufferHeight=this.height;A.bufferObj.attr({"width":this.width,"height":this.height});A.bufferContext.drawImage(this,0,0);if(A.isPlay==true){A.play()}else{A.isPlay=true}};B.onerror=function(){if(A.isPlay==true){A.play()}else{A.isPlay=true}}},loadSingleImg:function(){var A=this;var B=new Image();B.src=A.anim[A.currentFrame].src;B.onload=function(){A.bufferContext.drawImage(this,A.width*A.currentFrame,0);A.currentFrame++;if(A.currentFrame>=A.anim.length){A.currentFrame=0;if(A.isPlay==true){A.play()}else{A.isPlay=true}}else{A.loadSingleImg()}};B.onerror=function(){A.currentFrame++;if(A.currentFrame>=A.anim.length){A.currentFrame=0;if(A.isPlay==true){A.play()}else{A.isPlay=true}}else{A.loadSingleImg()}};B=null},appendTo:function(A){var B=this;A.append(B.obj);A=null},initAnim:function(){var A=this;if(A.timer!=null){clearTimeout(A.timer)}A.timer=null;A.parse=false},play:function(){if(this.isPlay==false){this.isPlay=true;return false}this.initAnim();this.obj.show();if(this.loadComplete){this.loadComplete()}this.playAnim()},playAnim:function(){var C=this;if(C.parse){return false}if(C.currentFrame<C.anim.length){C.context.clearRect(0,0,C.canvasOffset.width,C.canvasOffset.height);var G=null;var D=C.anim[C.currentFrame];if(C.resource=="all"){var F=(D.rect[0]+C.width>C.bufferWidth)?(C.bufferWidth-D.rect[0]):C.width;var A=(D.rect[1]+C.height>C.bufferHeight)?(C.bufferHeight-D.rect[1]):C.height}for(var B=0,E=C.imgOffset.length;B<E;B++){G=C.imgOffset[B];if(G.scaleX!=null||G.scaleY!=null){C.context.save();C.context.translate(G.left+C.width/2,G.top+C.height/2);C.context.scale((G.scaleX||1),(G.scaleY||1));if(C.resource=="single"){C.context.drawImage(C.bufferObj[0],C.width*C.currentFrame,0,C.width,C.height,-C.width/2,-C.height/2,C.width,C.height)}else{if(C.resource=="all"&&F>0&&A>0){C.context.drawImage(C.bufferObj[0],D.rect[0],D.rect[1],F,A,-C.width/2,-C.height/2,F,A)}}C.context.restore()}else{if(C.resource=="single"){C.context.drawImage(C.bufferObj[0],C.width*C.currentFrame,0,C.width,C.height,G.left,G.top,C.width,C.height)}else{if(C.resource=="all"&&F>0&&A>0){C.context.drawImage(C.bufferObj[0],D.rect[0],D.rect[1],F,A,G.left,G.top,F,A)}}}}G=null;if(D.rect[2]!=null&&D.rect[3]!=null){C.obj.css({"left":D.rect[2]+"px","top":D.rect[3]+"px"})}if(D.callback){D.callback()}if(C.loop==true&&C.currentFrame==C.anim.length-1){C.currentFrame=0}else{C.currentFrame++}C.timer=setTimeout(function(){C.playAnim()},D.interval);D=null}else{clearTimeout(C.timer);C.timer=null;C.parse=true;if(C.callback){C.callback();C.callback=null}if(C.endDestroy){C.endDestroy=false;C.destroy()}}},stop:function(){var A=this;if(A.timer!=null){clearTimeout(A.timer);A.timer=null}A.parse=true},destroy:function(){var A=this;A.initAnim();A.anim=null;if(A.obj){A.context=null;A.obj.remove()}A.obj=null;if(A.bufferObj){A.bufferContext=null;A.bufferObj.remove()}A.bufferObj=null},}})();(function(){playFrameAnimClass=function(A){this.id="";this.css=(A.css||{});this.rowNum=A.rowNum||0;this.colNum=A.colNum||0;this.frameNum=A.frameNum||0;this.width=0;this.height=0;this.interval=(A.interval||100);this.frames=null;this.frameCallNum=(A.frameCallNum||null);this.loop=A.loop||false;this.looptimes=1;this.obj=null;this.pause=false;this.currentFrame=0;this.callback=null;this.endDestory=true;this.frames=A.frames;if(A.callback){this.callback=A.callback}if(A.endDestory){this.endDestory=A.endDestory}this.thread=null;this.init()};playFrameAnimClass.prototype={init:function(){this.id=helper.createUUID("mymovieclip");var D="display:none;position:absolute;pointer-events:none;background-repeat:no-repeat;background-position:0 0;";var C=null;for(var B in this.css){C=this.css[B];D+=B+":"+C+";";if(B=="width"||B=="height"){this[B]=parseInt(C)}}var A='<div id="'+this.id+'" style="'+D+'"></div>';this.obj=$(A);if(this.frames==null){this.frames=[];var E=0;for(var B=0;B<this.rowNum;B++){for(var F=0;F<this.colNum;F++){this.frames.push({rect:[F*this.width,B*this.height],interval:this.interval});E++;if(E>=this.frameNum){break}}}}},appendTo:function(A){A.append(this.obj);A=null},play:function(){this.obj.show();this.playTimer(0)},playTimer:function(A){var B=this;if(B.pause==true){return}var C=B.getFrame(A);if(C==false&&(B.loop===true||(typeof B.loop!="boolean"&&B.looptimes<B.loop))){B.initAnim();A=0;C=B.getFrame(A);if(typeof B.loop!="boolean"){B.looptimes++}}if(C){var D={"background-position":"-"+C.rect[0]+"px -"+C.rect[1]+"px"};if(typeof C.rect[2]!="undefined"&&typeof C.rect[3]!="undefined"){D.left=C.rect[2];D.top=C.rect[3]}B.obj.css(D);if(A+1==B.frameCallNum&&B.callback){B.callback();B.callback=null}B.thread=setTimeout(function(){B.currentFrame=A+1;B.playTimer(B.currentFrame)},C.interval)}else{clearTimeout(B.thread);B.pause=true;if(B.frameCallNum==null&&B.callback){B.callback();B.callback=null}if(B.endDestory==true){B.endDestory=false;B.destory()}}},stop:function(){if(this.thread!=null){clearTimeout(this.thread)}this.pause=true},getFrame:function(A){if(this.frames&&this.frames[A]!=undefined){return this.frames[A]}return false},initAnim:function(){clearTimeout(this.thread);this.currentFrame=0;this.pause=false},replay:function(){this.initAnim();this.play()},destory:function(){this.initAnim();if(this.obj){this.obj.remove();this.obj=null;this.css=null}},}})();